<!DOCTYPE HTML>
<html>
	<head>
		<meta charset='utf-8' />
		<link rel="stylesheet/less" type="text/css" href="style/colors.less" />
		<link rel="stylesheet/less" type="text/css" href="style/content.less" />
		<link rel="stylesheet/less" type="text/css" href="style/header.less" />
		<link rel="stylesheet/less" type="text/css" href="style/widgets.less" />
		<link rel="stylesheet/less" type="text/css" href="style/page.less" />
		<link rel="stylesheet/less" type="text/css" href="style/navigation.less" />
		<script type="text/javascript" src="lib/jquery.js"></script>
		<script type="text/javascript" src="lib/less.js"></script>
		<script type="text/javascript" src="host.js"></script>
		<script type="text/javascript" src="js/websocket.js"></script>
		<script type="text/javascript" src="js/menu.js"></script>
		<script type="text/javascript" src="js/content.js"></script>
		<script type="text/javascript" src="js/haushalt.js"></script>
	</head>
	<body>
		<div id="header">
			<div class="info">
				Eingeloggt als: Max, Familie Mustermann
			</div>
			<div id="navigation">
			</div>
			<div class="clear"></div>
		</div>
		<div id="wrapper">
			<div id="content">
				<h1>Laden...</h1>
				<div id="contentText">
					<p>Bitte warten Sie, während eine Verbindung zum Server aufgebaut wird.</p>
				</div>
			</div>
			<div id="widgets">
				<div>
					<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
				</div>
				<div>
					<p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua.</p>
				</div>
			</div>
		</div>
		<script type="text/html" id="templateRegister">
			<div class="form">
				<p>Hier können Sie einen neuen Haushalt anlegen.</p>
				<p><label>Name:</label><input name="name" type="text" /></p>
				<p><label>Passwort:</label><input name="password" type="text" /></p>
				<p><button>Registrieren</button></p>
			</div>
		</script>
		<script type="text/html" id="templateLogin">
			<div class="form">
				<p>Hier können Sie sich in einen bestehenden Haushalt einloggen.</p>
				<p><label>Name:</label><input name="name" type="text" /></p>
				<p><label>Passwort:</label><input name="password" type="text" /></p>
				<p><button>Login</button></p>
			</div>
		</script>
		<script type="text/javascript">
			
			Websocket.addOpenListener(function()
			{
				var users = new MenuEntry("Benutzer");
				var login = new MenuEntry("Einloggen", function() 
				{
					alert("Lorem");
				});
				var register = new MenuEntry("Registrieren", function() 
				{
					Content.setContent(
					{
						heading : "Registrieren",
						html : $("#templateRegister").html(),
						onAttached : function(node) { 
							node.find(":button").click(function() {
								Websocket.send("Register", {
									name: node.find("input[name='name']").val(),
									password: node.find("input[name='password']").val()
								}, function(response) {
									alert(response.succeeded);
								});
							});
						},
						onDetached : function(node) { }
					});
				});
				users.addEntry(login);
				users.addEntry(register);
				Menu.addEntry(users);
				Menu.refresh();
				Content.setContent(
				{
					heading : "Verbunden",
					html : $("<p>Die Verbindung zum Server wurde erfolgreich hergestellt.</p>"),
					onAttached : function(node) { },
					onDetached : function(node) { }
				});
			});
			
		</script>
	</body>
</html>
